"use strict";var tmpl;!function(){var a={};tmpl=function b(c,d){var e=/\W/.test(c)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+c.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):a[c]=a[c]||b(document.getElementById(c).innerHTML);return d?e(d):e}}();var selProd={id:0,qty:0,selected:0},handleSteps,bindEvents;$(document).ready(function(){if($("[data-toggle=offcanvas]").click(function(){$(".row-offcanvas").toggleClass("active")}),$(document.body).on("click",".dropdown-menu li",function(a){var b=$(a.currentTarget);return $(".glyphicon.glyphicon-ok.pull-right.selected").remove(),b.find("a").prepend('<span class="glyphicon glyphicon-ok pull-right selected">&nbsp;</span>'),b.closest(".btn-group").find('[data-bind="label"]').text(b.text()).end().children(".dropdown-toggle").dropdown("toggle"),$("#selectedSite strong").text(b.text()),$(".list_sel").hide().removeClass("shown"),$(".list_"+$(b).attr("class").split(" ")[0]).show().addClass("shown"),$("#filter-list").prop("disabled",!1).val(""),!1}),$(".productInfoLink").on("click",function(){$("#infoModal").modal(),$("#infoModal .modal-body").html(tmpl("loadingTmpl")),setTimeout(function(){$.ajax({url:$("#licJSONUrl").val().trim(),"content-type":"json",success:function(a){$("#infoModal .modal-title").html(a.product_name),$("#infoModal .modal-body").html(tmpl("productInfoTmpl",{resp:a}))}})},999)}),$(".prod-sel").on("change",function(){$(".qty-to-act-picker").prop("disabled",!0),$(this).closest("tr").find(".qty-to-act-picker").prop("disabled",!1)}),bindEvents=function(){$(".next-step").click(function(){handleSteps(this)}),$(".sel_system")&&($(".alert.alert-danger.done,.alert.alert-danger.incomplete").hide(),$(".sel_system").on("click",function(){if($(".alert.alert-danger.done,.alert.alert-danger.incomplete").hide(),$(this).prop("checked")&&parseInt(selProd.qty)===parseInt(selProd.selected))return $(".alert.alert-danger.done").show(),!1;if($(this).prop("checked")){var b={};b.systemName=$(this).parent().find("label").text().trim(),b.id=$(this).data("id"),$("#selectedList").append(tmpl("selectedTmpl",b)),selProd.selected+=1,a(),$(".remove-item").on("click",function(){var b=$(this).data("id");$(this).parent().remove(),$("[data-id="+b+"]").prop("checked",!1),selProd.selected-=1,a()})}else selProd.selected-=1,a(),$($("[data-id="+$(this).data("id")+"]").get(1)).parent().remove()})),$("#filter-list").on("keyup",function(){var a=$.trim($(this).val());$(".filter-list li.shown").each(function(){$(this).text().toLowerCase().indexOf(a.toLowerCase())>=0?$(this).show():$(this).hide()})});var a=function(){$("#selCount").text(selProd.selected)};$("#tnc").on("change",function(){$(this).is(":checked")?$("#step4Next").removeClass("disabled"):$("#step4Next").addClass("disabled")})},bindEvents(),handleSteps=function(a){var b,c="object"==typeof a?$(a).data("nextid"):a.replace("#","");if("step2"===c)b=$("#step2JSONUrl").val().trim(),$("#sidebar a").removeClass("active"),$($("#sidebar a").get(1)).addClass("active"),selProd.qty=$(".qty-to-act-picker").not(":disabled").val(),selProd.id=$(".qty-to-act-picker").not(":disabled").data("prodid");else if("step3"===c){if($(".alert.alert-danger.incomplete").hide(),parseInt(selProd.qty)!==parseInt(selProd.selected))return $(".alert.alert-danger.incomplete").show(),!1;selProd.selectedSystems=[],$("#selectedList li").each(function(){var a={};a.sysName=$(this).text().trim(),selProd.selectedSystems.push(a)}),$("#sidebar a").removeClass("active"),$($("#sidebar a").get(2)).addClass("active")}else"step4"===c?(b=$("#step4JSONUrl").val().trim(),$("#sidebar a").removeClass("active"),$($("#sidebar a").get(3)).addClass("active")):"step5"===c&&(b=$("#step5JSONUrl").val().trim(),$("#sidebar a").removeClass("active"),$($("#sidebar a").get(4)).addClass("active"));$(".steps-data").hide(),$("#wrapper").html(tmpl("loadingTmpl")).show(),setTimeout(function(){b?$.ajax({url:b,"content-type":"json",success:function(a){$("#wrapper").hide(),a.selProdQty=selProd.qty,$("#"+c+"-contents").show().html(tmpl(c,{resp:a})),$(location).attr("hash","#"+c),bindEvents()}}):($("#wrapper").hide(),$("#"+c+"-contents").show().html(tmpl(c,{resp:selProd})),$(location).attr("hash","#"+c),bindEvents())},999)},$(location).attr("pathname").indexOf("wizard.html")>0){var a=$(location).attr("hash");a?("#step2"===a||"#step3"===a||"#step4"===a||"#step5"===a)&&handleSteps(a):($(location).attr("hash","#step1"),window.location.reload(!0))}});